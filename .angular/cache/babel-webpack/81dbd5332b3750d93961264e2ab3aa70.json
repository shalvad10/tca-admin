{"ast":null,"code":"import SharedMethods from 'src/app/Helpers/SharedMethods';\nimport appData from 'src/app/Services/Data/AppData';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/Http/user.service\";\nimport * as i2 from \"../../../Components/universal-view/universal-view.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../../Components/user-card/user-card.component\";\n\nfunction UserListComponent_section_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelement(1, \"app-user-card\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"firstName\", user_r2.firstName)(\"lastName\", user_r2.lastName)(\"storeName\", user_r2.magazineBranch)(\"position\", user_r2.position)(\"avatar\", user_r2.avatar)(\"id\", user_r2.id);\n  }\n}\n\nfunction UserListComponent_section_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 1);\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"div\", 4);\n    i0.ɵɵtemplate(4, UserListComponent_section_1_div_4_Template, 2, 6, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.users);\n  }\n}\n\nexport let UserListComponent = /*#__PURE__*/(() => {\n  class UserListComponent {\n    constructor(userService) {\n      this.userService = userService;\n      this.dataLoaded = false;\n    }\n\n    ngOnInit() {\n      this.userService.getUserRoles(SharedMethods.getToken(appData)).subscribe(data => {\n        console.error(data);\n      });\n      console.warn(this.users);\n\n      if (this.users.length == 0) {\n        if (SharedMethods.isStoreView()) {\n          SharedMethods.getUsersByStore(appData, this.storeID, this.userService, dt => {\n            dt.forEach(el => {\n              const tmpUser = el.user;\n              tmpUser.magazineBranch = el.magazineBranchs.name;\n              tmpUser.magazineBranchId = el.magazineBranchs.id;\n              tmpUser.position = el.positions.name;\n              tmpUser.positionId = el.positions.id;\n              tmpUser.fullInfo = el;\n              appData.data.users.data.push(tmpUser);\n            });\n            this.dataLoaded = true;\n            SharedMethods.loader(false);\n          });\n        } else {\n          SharedMethods.getUsers(appData, this.userService, dt => {\n            console.warn(dt);\n            appData.data.users.data = dt.data;\n            appData.data.users.active = dt.pageNumber;\n\n            if (appData.data.users.pages.length == 0) {\n              for (let i = 1; i <= dt.totalPages; i++) {\n                appData.data.users.pages.push(i);\n              }\n            }\n\n            this.dataLoaded = true;\n            SharedMethods.loader(false);\n          });\n        }\n      } else {\n        this.dataLoaded = true;\n      }\n    }\n\n    get storeID() {\n      return appData.data.currentUser.magazineBranchId;\n    }\n\n    get users() {\n      return appData.data.users.data;\n    }\n\n    get pages() {\n      return appData.data.users.pages;\n    }\n\n    get activePage() {\n      return appData.data.users.active;\n    }\n\n    navigate(page) {\n      SharedMethods.getUsers(appData, this.userService, dt => {\n        appData.data.users.data = dt.data;\n        appData.data.users.active = dt.pageNumber;\n\n        if (appData.data.users.pages.length == 0) {\n          for (let i = 1; i <= dt.totalPages; i++) {\n            appData.data.users.pages.push(i);\n          }\n        }\n      });\n    }\n\n  }\n\n  UserListComponent.ɵfac = function UserListComponent_Factory(t) {\n    return new (t || UserListComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n  };\n\n  UserListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserListComponent,\n    selectors: [[\"app-user-list\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[\"class\", \"content\", 4, \"ngIf\"], [1, \"content\"], [1, \"card\", \"card-solid\"], [1, \"card-body\", \"pb-0\"], [1, \"row\", \"d-flex\", \"align-items-stretch\"], [\"class\", \"col-12 col-sm-6 col-md-4 d-flex align-items-stretch\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-12\", \"col-sm-6\", \"col-md-4\", \"d-flex\", \"align-items-stretch\"], [1, \"sz\", 3, \"firstName\", \"lastName\", \"storeName\", \"position\", \"avatar\", \"id\"]],\n    template: function UserListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-universal-view\");\n        i0.ɵɵtemplate(1, UserListComponent_section_1_Template, 5, 1, \"section\", 0);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dataLoaded);\n      }\n    },\n    directives: [i2.UniversalViewComponent, i3.NgIf, i3.NgForOf, i4.UserCardComponent],\n    styles: [\".sz[_ngcontent-%COMP%]{width:100%;max-width:400px}\"]\n  });\n  return UserListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}