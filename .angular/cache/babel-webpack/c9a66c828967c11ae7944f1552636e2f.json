{"ast":null,"code":"import appData from 'src/app/Services/Data/AppData';\nimport SharedMethods from 'src/app/Helpers/SharedMethods';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/Http/products.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"src/app/Services/Http/reasons.service\";\nimport * as i4 from \"@ng-select/ng-select\";\nimport * as i5 from \"@angular/forms\";\nexport let DeletionComponent = /*#__PURE__*/(() => {\n  class DeletionComponent {\n    constructor(productService, toastr, reasonsService) {\n      this.productService = productService;\n      this.toastr = toastr;\n      this.reasonsService = reasonsService;\n      this.selected = null;\n      this.quantity = 0;\n    }\n\n    ngOnInit() {\n      if (appData.data.PRReasons.length === 0) {\n        this.reasonsService.getAll(SharedMethods.getToken(appData)).subscribe(data => {\n          if (data) {\n            appData.data.PRReasons = data;\n          }\n        });\n      }\n    }\n\n    get reasons() {\n      return appData.data.PRReasons;\n    }\n\n    makeChanges(type, ev) {\n      switch (type) {\n        case 'select':\n          {\n            this.selected = Number.parseInt(ev.target.options[ev.target.options.selectedIndex].value);\n            break;\n          }\n\n        case 'input':\n          {\n            this.quantity = Number.parseInt(ev.target.value);\n            break;\n          }\n      }\n    }\n\n    confirm() {\n      if (this.selected !== null) {\n        if (this.quantity > this.modalParams.productQuantity) {\n          SharedMethods.alertNotification(this.toastr, 'danger', {\n            text: `მაღაზიაში აღნიშნული პროდუქტის საერთო რაოდენბაა: ${this.modalParams.productQuantity}`\n          });\n          this.quantity = this.modalParams.productQuantity;\n        } else {\n          this.productService.removeProduct(this.modalParams.productToBranchID, this.selected, this.quantity, SharedMethods.getToken(appData)).subscribe(data => {\n            if (data) {\n              appData.data.products = appData.data.products.filter(pr => pr.itemID !== data.productToBranch.id);\n              appData.data.modal.currentModal = '';\n              SharedMethods.alertNotification(this.toastr, 'success', {\n                text: `ოპერაცია წარმატებით განხორციელდა`\n              });\n            }\n          });\n        }\n      }\n    }\n\n    deny() {\n      appData.data.modal.currentModal = '';\n    }\n\n  }\n\n  DeletionComponent.ɵfac = function DeletionComponent_Factory(t) {\n    return new (t || DeletionComponent)(i0.ɵɵdirectiveInject(i1.ProductsService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.ReasonsService));\n  };\n\n  DeletionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DeletionComponent,\n    selectors: [[\"modal-deletion\"]],\n    inputs: {\n      modalParams: \"modalParams\"\n    },\n    decls: 14,\n    vars: 2,\n    consts: [[1, \"content\"], [1, \"row\"], [1, \"font_geo\", \"medium_font\"], [1, \"form-group\", \"font_geo\", \"medium_font\"], [\"bindLabel\", \"name\", \"bindValue\", \"id\", 1, \"select\", 3, \"items\", \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"quantity\", \"id\", \"quantity\", \"placeholder\", \"\\u10D0\\u10DB\\u10DD\\u10E1\\u10D0\\u10E6\\u10D4\\u10D1\\u10D8 \\u10DE\\u10E0\\u10DD\\u10D3\\u10E3\\u10E5\\u10E2\\u10D8\\u10E1 \\u10E0\\u10D0\\u10DD\\u10D3\\u10D4\\u10DC\\u10DD\\u10D1\\u10D0\", 1, \"font_geo\", \"medium_font\", 3, \"input\"], [1, \"row\", \"buttons\"], [1, \"btn\", \"btn-success\", \"font_geo\", \"medium_font\", 3, \"click\"], [1, \"btn\", \"btn-danger\", \"font_geo\", \"medium_font\", 3, \"click\"]],\n    template: function DeletionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"span\", 2);\n        i0.ɵɵtext(3, \" \\u10D0\\u10D8\\u10E0\\u10E9\\u10D8\\u10D4\\u10D7 \\u10DE\\u10E0\\u10DD\\u10D3\\u10E3\\u10E5\\u10E2\\u10D8\\u10E1 \\u10D0\\u10DB\\u10DD\\u10E6\\u10D4\\u10D1\\u10D8\\u10E1 \\u10DB\\u10D8\\u10D6\\u10D4\\u10D6\\u10D8 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 1);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"ng-select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function DeletionComponent_Template_ng_select_ngModelChange_6_listener($event) {\n          return ctx.selected = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 1);\n        i0.ɵɵelementStart(8, \"input\", 5);\n        i0.ɵɵlistener(\"input\", function DeletionComponent_Template_input_input_8_listener($event) {\n          return ctx.makeChanges(\"input\", $event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵlistener(\"click\", function DeletionComponent_Template_div_click_10_listener() {\n          return ctx.confirm();\n        });\n        i0.ɵɵtext(11, \" \\u10D3\\u10D0\\u10D3\\u10D0\\u10E1\\u10E2\\u10E3\\u10E0\\u10D4\\u10D1\\u10D0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 8);\n        i0.ɵɵlistener(\"click\", function DeletionComponent_Template_div_click_12_listener() {\n          return ctx.deny();\n        });\n        i0.ɵɵtext(13, \" \\u10D3\\u10D0\\u10D1\\u10E0\\u10E3\\u10DC\\u10D4\\u10D1\\u10D0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"items\", ctx.reasons)(\"ngModel\", ctx.selected);\n      }\n    },\n    directives: [i4.NgSelectComponent, i5.NgControlStatus, i5.NgModel],\n    styles: [\".content[_ngcontent-%COMP%]{width:370px;background-color:#fff;border-radius:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10px}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]   .row.buttons[_ngcontent-%COMP%]{justify-content:space-between}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{width:100%;height:45px;margin:5px 0}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:10px}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:15px}.form-group[_ngcontent-%COMP%]{width:100%}  .ng-dropdown-panel{margin-top:50px!important}\"]\n  });\n  return DeletionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}